# Initial configuration & security setup of the deployment server:
# - changes default password of root user;
# - sets up SSH configuration & bruteforce prevention via SSH;
# - configures UFW;
# - creates deployment user for running other playbooks & adds his public key for SSH authenticaton;
#
# NOTE: when running playbook against a known host after it was reset to a clean state, it's SSH key must be updated in known hosts file:
# 1) Remove known host info:
#       ssh-keygen -R $ANSIBLE_HOST
# 2) Manually connect to the server & add its key.
     

- hosts: srv
  roles:
    - server_config_ufw
    - server_config_fail2ban
    - server_config_users_and_ssh